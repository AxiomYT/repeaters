# Introduction

This logic design is such that it should cover most current and future requirements of UK speech repeaters. 
Facilities incorporated in the logic include the usual selection of callsign, locator and location for ident, 
as well as tone burst detection, CTCSS encode and decode, DTMF decoding, and serial data using standard packet
type audio tones. These latter two can be used for remote shutdown/start-up, or for 'on-air' modifications to
operational characteristics.

Facilities also exist for a separate data/control channel, and extra control and audio inputs are included for
future repeater linking. This linking facility exists in rudimentary form on the logic board, but does require
external decoding circuitry for proper linking control. The current version of the embedded firmware does not 
yet support repeater linking, but a beta-test version is currently running the GB3TE and GB3CL repeaters as a 
co-sited linked pair.

# Hardware Description

The hardware design is based around a single-chip micro-controller from Motorola, the MC68HC705. This device contains up to 32 input/output lines, a timer, a serial port, RAM and about 7 k bytes of EPROM to contain the programme. The processor is interfaced to other devices within the circuit design to provide the required functions.

Other features incorporated are implemented by the usual NE567 for tone burst detection, an FX805 for CTCSS, MV8870 for DTMF decoding and TCM3105 for serial data input and output.

Incoming audio from the receiver is amplified and then split to feed all the devices which require it. These are the NE567 tone burst detector, the MV8870 DTMF decoder and the TCM3105 data decoder. The received speech is fed via the FX805 CTCSS device, which detects and removes any incoming CTCSS tone, and then to the summing amplifier where all outgoing audio information is added together. This outgoing information consists of through audio, CTCSS transmit tone (generated by the FX805), CW ident and data tones. This combined audio is then peak clipped, to guard against over-deviation of the transmitted signal, and filtered by a 20 dB per decade low-pass filter. The output of this filter is fed to the repeater transmitter.

No de-emphasis or pre-emphasis is included in the logic. Any pre-emphasis in the repeater transmitter must be removed, to avoid attenuation of the outgoing CTCSS tone. Likewise the repeater receiver must also have its de-emphasis removed to match the transmitted audio response. The overall effect of not having any in-built audio tailoring, is that signals are transmitted as they are received, with the exception of the peak clipping and subsequent low pass filtering.

If required, the input to the MV8870 DTMF and the TCM3105 data decoders may be linked to a separate audio input for remote repeater control on a separate channel. Likewise, the TCM3105 data output may also be linked to a separate transmitter for the same reason and another audio tone feed is available to produce a 'pip' audio feedback on the normal channel.

# Operational Characteristics

To provide simple control and versatility for a wide variety of uses, a 128 byte EEPROM is included to store all the configuration data which give the repeater its characteristics. These data includes the following:-

* Callsign
* Locator/Location
* DTMF tone sequence for shutdown/start-up
* Beacon time
* Option selection
*  Various timings, etc.

All modifiable features are stored in the EEPROM, so are relatively easy to change. All features are accessible via a direct connection to the logic board itself (RS232), some may also be changed 'on-air' while the repeater is operational by using the datalink and a 'BayComm' modem. These latter changes are only simple ones, and do not affect the fundamental operation of the repeater. They are also protected by a password scheme which, although not unbreakable, is sufficiently difficult to break so as to deter the casual 'hacker'.

All modifiable features are controlled by a set of simple commands via the built-in RS232 serial port. A normal PC is suitable for this control, and a PC programme is freely available to implement all the configurable features (including automatic password generation).

# Current Installations

The G8CUL repeater logic has been running successfully the GB3CL (70cms) and GB3TE (2m) repeaters in Essex since May '94 and October '94 respectively andGB3DI (70cm) since September '95.

Other UK repeaters using the logic include

* 6m - GB3EF, GB3HX

* 2m - GB3IG, GB3NA, GB3ZA, GB3BC, GB3CG, GB3WD, GB3WR, GB3DA, GB3EL, GB3TE

* 70cms - GB3HM, GB3WY, GB3LA, GB3HD, GB3DS, GB3MG, GB3HC, GB3CH, GB3VS, GB3UB, GB3WO, GB3OX, GB3DI, GB3CC, GB3BR, GB3LR, GB3ER, GB3CE, GB3CL, GB3IH, GB3DE

Note - not all these repeaters may be 'on-air' with the control logic. Some may be currently undergoing updates!

The required specification for 6m repeater operation is included in the internal control programme and the 6m repeaters GB3EF and GB3HX are currently using the G8CUL repeater logic.

# Electrical Specification

## Power requirements
* +8 to +20V DC at about 100 mA. Normal or Standby power input.
## Audio input
* 300 - 400 mV P:P into 10k composite signal:
Through audio (reference), CTCSS at -16 dB, Tone burst at -6 dB, DTMF at -6 dB, Data tones at 0 dB.
## Audio output
* 0.5V rms. into 1k, composite signal:
Through audio (reference), CTCSS at -16 dB, Ack/callsign tone at -6 dB (high) -16 dB (low), Data tones at 0 dB.
## Squelch input
* 5V Logic signal, either polarity (other voltage levels possible).
## PTT output
* Diode protected open collector output, 100 mA max. (ON), 25V max. (OFF).
## Control
* 9 pin RS232 connector for direct connection to PC for logic set-up and 'fine-tuning'.
* Data tone decoder/encoder for limited 'on-air' control.
* N.B., the DTMF and data signals can be linked to a separate RX/TX combination if required.
## Shutdown
* Local (via switch) or remote (DTMF or data tones).
## Voice
* Control signals to and audio input from external synthesised voice unit (Maplin board suitable).
## Repeater linking
* Extra Squelch and audio input for second (link) receiver.
## Configuration
* All configurable parameters held in non-volatile EEPROM for easy modification via built-in serial port.

# Further Details

The logic unit can be supplied to other repeater groups, and is available in kit form, or fully assembled.

For further information, contact:

  Mike Stevens, G8CUL,
  67 New Rd,
  East Hagbourne,
  Didcot, Oxon.
  OX11 9JX.

Tel: 01235 816379
Fax: 01235 510411
Packet: G8CUL @ GB7AVM
[email](mailto:mpstevens@iee.org)
